#!/bin/bash
set -e
echo "#------------------------------------------------------------------------------------------"
echo "Setup the build environment on travis"
echo "#------------------------------------------------------------------------------------------"
#git clone git@github.com:ayyalaraju/docker-2ds.git
ls -lrt
echo "#------------------------------------------------------------------------------------------"
echo "Login to Artifactory"
echo "#------------------------------------------------------------------------------------------"
export DOCKER_REPO=akoundin/hello
docker login -u akoundin --password-stdin $DOCKER_REPO_KEY $DOCKER_REPO
echo "#------------------------------------------------------------------------------------------"
echo "Build Docker Image"
echo "#------------------------------------------------------------------------------------------"
docker build -t hello:latest .
echo "#------------------------------------------------------------------------------------------"
echo "Push to Docker Repo"
echo "#------------------------------------------------------------------------------------------"
docker push akoundin/hello:latest
echo "#------------------------------------------------------------------------------------------"
echo "Finish Build"
echo "#------------------------------------------------------------------------------------------"
